---
- name: Common setup across all VMs
  hosts: all
  become: true
  roles:
    - common

- name: Setup Public VM
  hosts: public
  become: true
  tasks:
    - import_tasks: roles/common/tasks/public.yml
  roles:
    - nginx
    - wireguard
    - tomcat

- hosts: wazuh_manager
  become: yes
  roles:
    - role: wazuh-manager
    - role: wazuh-dashboard

- name: Setup Elasticsearch VM
  hosts: elasticvm
  become: true
  roles:
    - elasticsearch

- name: Setup Nexus VM
  hosts: nexusvm
  become: true
  roles:
    - nexus
